{% extends 'registration/base.html' %}

{% block templates %}
    {{ block.super }}
    <script id="form-template" type="text/template">
        <% _.each(fields,function(value,key) { %>
            <% if (model.types[key]) { %>
                <div class="field <%=model.types[key]%> <% if (errors[key]) { %>error<% } %>">
                    <% if (model.types[key] != 'hidden') { %><label><%=model.labels[key]%></label><% } %>
                    <input data-value="<%=type%>.<%=key%>" type="<%=model.types[key]%>">
                    <% if (errors[key]) { %>
                        <ul>
                            <% _.each(errors[key],function(value){ %>
                                <li><%=value%></li>
                            <% }) %>
                        </ul>
                    <% } %>
                </div>
            <% } %>
        <% }) %>
        <% if (errors['__all__']) { %>
        <div class="field error">
        <ul>
            <% _.each(errors['__all__'],function(value){ %>
            <li><%=value%></li>
            <% }) %>
        </ul>
            </div>
        <% } %>
        <div class="continue" data-on-click="<%=type%>:commit">Continue</a>
    </script>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script>
        var job_seeker_view = new (form_view_fabric('job_seeker_registration'))({el:$('#register_job_seeker_form')});
        job_seeker_view.render();
        var employer_view = new (form_view_fabric('employer_registration'))({el:$('#register_employer_form')});
        employer_view.render();
    </script>
{% endblock %}